"use strict";const inputText=document.querySelector(".js-input-text"),btnSearch=document.querySelector(".js-btn-search"),btnReset=document.querySelector(".js-btn-reset"),animeList=document.querySelector(".js-list"),listFavourites=document.querySelector(".js-favourites"),DEFAULT_IMAGE="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let seriesList=[],favouritesAnime=[];function handleSearchSerie(e){e.preventDefault(),animeList.innerHTML="",fetch("https://api.jikan.moe/v3/search/anime?q="+inputText.value).then(e=>e.json()).then(e=>{seriesList=e,printAnimeList(seriesList.results),console.log(seriesList)})}function printAnimeList(e){for(const t of e){let e=document.createElement("li");e.classList.add("anime"),animeList.appendChild(e),e.innerHTML+=`<img data-id="${t.mal_id}"  class="img" src="${t.image_url?t.image_url:DEFAULT_IMAGE}"  />`,e.innerHTML+=""+t.title,e.addEventListener("click",addToFav)}}function addToFav(e){const t=e.target.dataset.id;if(!favouritesAnime.find(e=>e.mal_id===t))for(const i of seriesList.results)i.mal_id===parseInt(t)&&(favouritesAnime.push({mal_id:""+i.mal_id,image_url:""+i.image_url,title:""+i.title}),localStorage.setItem("favourite_animes",JSON.stringify(favouritesAnime)),e.currentTarget.classList.add("select-border"),printToFav(i))}function printToFav(e){let t=document.createElement("li");t.classList.add("favs-anime"),listFavourites.appendChild(t),t.innerHTML+=`<img data-id="${e.mal_id}" class="img__fav" src="${e.image_url?e.image_url:DEFAULT_IMAGE}" />`,t.innerHTML+=e.title+' <i class="fas fa-times-circle"></i>'}function printFavAnimes(e){for(const t of e)printToFav(t)}function handleResetBtn(e){e.preventDefault(),animeList.innerHTML="",inputText.value=""}function loadFavAnimes(){localStorage.getItem("favourite_animes")&&(favouritesAnime=JSON.parse(localStorage.getItem("favourite_animes"))),printFavAnimes(favouritesAnime)}inputText.value="",loadFavAnimes(),btnSearch.addEventListener("click",handleSearchSerie),btnReset.addEventListener("click",handleResetBtn);